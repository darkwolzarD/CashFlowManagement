@model CashFlowManagement.ViewModels.IncomeListViewModel
@using CashFlowManagement.Constants
@using CashFlowManagement.Utilities
@using CashFlowManagement.EntityModel
@{
    ViewBag.Title = "IncomeTable";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    string title = string.Empty;
    string type = string.Empty;
    if (Model.Type == (int)Constants.INCOME_TYPE.SALARY_INCOME)
    {
        title = "Thu nhập từ lương";
    }
}

<div class="background">
    <h3 class="text-center">@title</h3>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#create-new-income-modal">
        @if (Model.Type == (int)Constants.INCOME_TYPE.SALARY_INCOME)
        {
            @Html.Raw("Tạo mới thu nhập từ lương")
        }
    </button>
    <div class="asset-table">
        <table class="table table-bordered table-condensed table-responsive">
            <thead>
                <tr>
                    @if (Model.Type == (int)Constants.INCOME_TYPE.SALARY_INCOME)
                    {
                        <th>Thu nhập từ lương</th>
                        <th>Thu nhập tháng</th>
                        <th>Thu nhập năm</th>
                        <th>Ghi chú</th>
                        <th></th>
                    }
                </tr>
            </thead>
            <tbody>
                @if (Model.List.Any())
                {
                    foreach (var item in Model.List)
                    {
                        <tr>
                            <td>@item.Name</td>
                            <td>@FormatUtility.DisplayThousandSeparatorsForNumber(item.Value)</td>
                            <td>@FormatUtility.DisplayThousandSeparatorsForNumber(item.Value * 12)</td>
                            <td>@item.Note</td>
                            <td>
                                <button class="btn btn-success update-income" data-income-id="@item.Id">
                                    <span class="glyphicon glyphicon-pencil"></span>
                                </button>
                                <button class="btn btn-danger delete-income" data-income-id="@item.Id">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </button>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="5" class="text-center">Không có dữ liệu</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<div class="income-modal">
    @{ Html.RenderPartial("_IncomeModal", new Incomes
        {
            IncomeType = Model.Type
        }); }
</div>

<div class="update-modal">

</div>


<script type="text/javascript" src="~/Scripts/income.js"></script>
<script type="text/javascript">
    var Url = new Object();
    Url.CreateIncome = '@Url.Action("CreateIncome", "Income")';
    Url.LoadTable = '@Url.Action("IncomeTable", "Income")';
    Url.LoadIncome = '@Url.Action("_IncomeUpdateModal", "Income")';
    Url.UpdateIncome = '@Url.Action("UpdateIncome", "Income")';
    Url.DeleteIncome = '@Url.Action("DeleteIncome", "Income")';
    var incomeType = @Model.Type;
</script>