@using CashFlowManagement.Models
@{
    ViewBag.Title = "Quản lý khoản vay khác";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="clear10"></div>
<div class="row">
    <div class="col-md-12">
        <div class="btn-group btn-breadcrumb">
            <a href="#" class="btn btn-default"><i class="glyphicon glyphicon-home"></i></a>
            <a href="#" class="btn btn-default">Các khoản nợ</a>
            <a href="#" class="btn btn-default">Các khoản vay khác</a>
            <a href="#" class="btn btn-default">Chi tiết các khoản vay khác</a>
        </div>
    </div>
</div>
<div class="clear10"></div>
<div class="row">
    <div class="col-md-6">
        <p style="font-size: 20px;">Quản lý các khoản vay khác</p>
    </div>
    <div class="col-md-6 text-right">
        <button type="button" class="btn btn-success toggle-modal">
            <span class="glyphicon glyphicon-home"></span>
            Tạo khoản vay
        </button>
    </div>
</div>
<div class="clear10"></div>
<div class="row">
    <div class="col-md-12" id="other-liability-table-div">
        @{ Html.RenderAction("_OtherLiabilityTable", "OtherLiability"); }
    </div>
</div>

@{
    var navList = (List<NavigationViewModel>)HttpContext.Current.Session["NAV_LIST"];
    var currentId = navList.Where(x => x.Current == true).FirstOrDefault().Id;
    string previousText = string.Empty;
    string nextText = string.Empty;
    if (currentId - 1 > 0)
    {
        var previous = navList.Where(x => x.Id == currentId - 1).FirstOrDefault();
        previousText = previous.Display;
    }

    if (currentId + 1 < navList.Count() + 1)
    {
        var next = navList.Where(x => x.Id == currentId + 1).FirstOrDefault();
        nextText = next.Display;
    }
    else if (currentId + 1 == navList.Count() + 1)
    {
        nextText = "Hoàn tất khởi tạo";
    }
}

<footer class="col-md-12 text-right">
    @if (!string.IsNullOrEmpty(previousText))
    {
        <a href="@Url.Action("Previous", "Navigation")" class="btn btn-primary " style="font-size: 11px;">
            <span class="glyphicon glyphicon-arrow-left"></span>
            @previousText
        </a>
    }

    @if (!string.IsNullOrEmpty(nextText))
    {
        <a href="@Url.Action("Next", "Navigation")" class="btn btn-primary " style="font-size: 11px;">
            <span class="glyphicon glyphicon-arrow-right"></span>
            @nextText
        </a>
    }
</footer>

<div id="modal">

</div>

<script type="text/javascript" src="~/Scripts/otherliability.js"></script>
<script type="text/javascript">
    var Url = {};
    Url.OtherLiabilityForm = '@Url.Action("_OtherLiabilityForm", "OtherLiability")';
    Url.OtherLiabilityTable = '@Url.Action("_OtherLiabilityTable", "OtherLiability")';
    Url.CreateOtherLiability = '@Url.Action("_Create", "OtherLiability")';
    Url.SaveOtherLiability = '@Url.Action("Save", "OtherLiability")';
    Url.OtherLiabilityTable = '@Url.Action("_OtherLiabilityTable", "OtherLiability")';
    Url.DeleteOtherLiability = '@Url.Action("DeleteOtherLiability", "OtherLiability")';
    Url.OtherLiabilityUpdateForm = '@Url.Action("_OtherLiabilityUpdateForm", "OtherLiability")';
</script>