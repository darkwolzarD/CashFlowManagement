@using CashFlowManagement.Models
@{
    ViewBag.Title = "Quản lý bất động sản";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="clear10"></div>
<div class="row">
    <div class="col-md-12">
        <div class="btn-group btn-breadcrumb">
            <a href="#" class="btn btn-default"><i class="glyphicon glyphicon-home"></i></a>
            <a href="#" class="btn btn-default">Tài sản</a>
            <a href="#" class="btn btn-default">Bất động sản</a>
            <a href="#" class="btn btn-default">Chi tiết bất động sản</a>
        </div>
    </div>
</div>
<div class="clear10"></div>
<div class="row">
    <div class="col-md-6">
        <p style="font-size: 20px;">Quản lý bất động sản</p>
    </div>
    <div class="col-md-6 text-right">
        <button type="button" class="btn btn-success toggle-modal">
            <span class="glyphicon glyphicon-home"></span>
            Tạo bất động sản
        </button>
    </div>
</div>
<div class="clear10"></div>
<div class="row">
    <div class="col-md-12" id="real-estate-table-div">
        @{ Html.RenderAction("_RealEstateTable", "RealEstate"); }
    </div>
</div>

@{
    var navList = (List<NavigationViewModel>)HttpContext.Current.Session["NAV_LIST"];
    var currentId = navList.Where(x => x.Current == true).FirstOrDefault().Id;
    string previousText = string.Empty;
    string nextText = string.Empty;
    if (currentId - 1 > 0)
    {
        var previous = navList.Where(x => x.Id == currentId - 1).FirstOrDefault();
        previousText = previous.Display;
    }

    if (currentId + 1 < navList.Count() + 1)
    {
        var next = navList.Where(x => x.Id == currentId + 1).FirstOrDefault();
        nextText = next.Display;
    }
    else if (currentId + 1 == navList.Count() + 1)
    {
        nextText = "Hoàn tất khởi tạo";
    }
}

<footer class="col-md-12 text-right">
    @if (!string.IsNullOrEmpty(previousText))
    {
        <a href="@Url.Action("Previous", "Navigation")" class="btn btn-primary " style="font-size: 11px;">
            <span class="glyphicon glyphicon-arrow-left"></span>
            @previousText
        </a>
    }

    @if (!string.IsNullOrEmpty(nextText))
    {
        <a href="@Url.Action("Next", "Navigation")" class="btn btn-primary " style="font-size: 11px;">
            <span class="glyphicon glyphicon-arrow-right"></span>
            @nextText
        </a>
    }
</footer>

<div id="modal">

</div>

<script type="text/javascript" src="~/Scripts/realestate.js"></script>
<script type="text/javascript">
    var Url = {};
    Url._LiabilityForm = '@Url.Action("_LiabilityForm", "RealEstate")';
    Url.LiabilityForm2nd = '@Url.Action("_LiabilityForm2nd", "RealEstate")';
    Url._LiabilityTable = '@Url.Action("_LiabilityTable", "RealEstate")';
    Url.CreateRealEstate = '@Url.Action("_Create", "RealEstate")';
    Url.Confirm = '@Url.Action("_Confirm", "RealEstate")';
    Url.SaveRealEstate = '@Url.Action("Save", "RealEstate")';
    Url.RealEstateTable = '@Url.Action("_RealEstateTable", "RealEstate")';
    Url.DeleteTempLiability = '@Url.Action("DeleteTempLiability", "RealEstate")';
    Url.DeleteLiability = '@Url.Action("DeleteLiability", "RealEstate")';
    Url.DeleteRealEstate = '@Url.Action("DeleteRealEstate", "RealEstate")';
    Url.LiabilityUpdateForm = '@Url.Action("_LiabilityUpdateForm", "RealEstate")';
    Url.LiabilityUpdateForm2nd = '@Url.Action("_LiabilityUpdateForm2nd", "RealEstate")';
    Url.RealEstateUpdateForm = '@Url.Action("_RealEstateUpdateForm", "RealEstate")';
</script>